<!DOCTYPE html>
<html lang="en">

  <head>
    <title>SF Food Availability Simulation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./viz.css">
  </head>

  <body>
    <header>
      <div><a id="skip-link" href="#toolSection">Skip to Content</a></div>
      <h1>SF Food Availability Simulation</h1>
      <div class="intro">
        How does our built environment influence our eating behavior? This is San Francisco and each filled shape is either a supermarket (circle) or fast food (square). Each unfilled shape represents places with housing. One might compare this to maps of <a href="https://www.city-data.com/income/income-San-Francisco-California.html">income in the area</a>, <a href="https://nickconwayblog.wordpress.com/2016/11/13/the-disappearance-of-san-franciscos-middle-class-neighborhoods-1990-2010/">how neighborhood wealth has changed over time</a>, and <a href="https://www.sfmta.com/sites/default/files/pressreleases/2015/Muni%20Map%202015.pdf">mass transit</a>.
      </div>
    </header>
    <section id="toolSection">
      <div id="displayArea" class="tool-area">
        <canvas id="vizCanvas" width="625" height="520"></canvas>
      </div>
      <div id="controlArea" class="tool-area">
        <div class="subcontrol">
          <div class="main-label">Construct new: </div>
          <div>
            Left click to construct new building.
            <div id="buildingSubPanel">
              <div><label for="supermarketRadio"><input type="radio" name="buildingType" id="supermarketRadio" checked> Supermarket (<img class="example-img" alt="Example of what a supermarket looks like in the simulation" src="./supermarket.png">)</label></div>
              <div><label for="fastFoodRadio"><input type="radio" name="buildingType" id="fastFoodRadio"> Fast food (<img class="example-img" alt="Example of what fast food looks like in the simulation" src="./fastfood.png">)</label></div>
            </div>
          </div>
        </div>
        <div class="subcontrol">
          <div><label for="allowedDistance" class="main-label">Distance tollerance: <span id="allowedDistanceDisplay"></span></label></div>
          <div><input class="slider" type="range" min="1.1" max="2" value="1.1" step="0.05" id="allowedDistance" aria-describedby="allowedDistanceInstructions"></div>
          <div id="allowedDistanceInstructions" class="sub-label">How much further is someone willing to travel to get to a supermarket?</div>
        </div>
        <div class="subcontrol">
          <div class="main-label">Summary of results:</div>
          <div class="summary-display" id="supermarketSummary">
            <div class="numeric-display"><span id="supermarketNumericDisplay"></span> (<img class="example-img" alt="Example of what a residential area choosing supermarket looks like in the simulation" src="./home_supermarket.png">)</div>
            <div class="bar-display" id="supermarketBarDisplay"></div>
          </div>
          <div class="summary-display" id="fastFoodSummary">
            <div class="numeric-display"><span id="fastFoodNumericDisplay"></span> (<img class="example-img" alt="Example of what a residential area choosing fast food looks like in the simulation" src="./home_fastfood.png">)</div>
            <div class="bar-display" id="fastFoodBarDisplay"></div>
          </div>
          <div class="summary-display" id="unknownSummary">
            <div class="numeric-display"><span id="unknownNumericDisplay"></span> (<img class="example-img" alt="Example of what a residential area far from food source looks like in the simulation" src="./home_desert.png">)</div>
            <div class="bar-display" id="unknownBarDisplay"></div>
          </div>
          <div class="summary-display" id="axisDisplay">
            <div id="startDisplay">0%</div>
            <div id="endDisplay">100%</div>
          </div>
        </div>
      </div>
    </section>
    <footer>
      <p>Made by <a href="https://gleap.org">Sam Potttinger</a>. By using this you agree to the <a href="https://github.com/sampottinger/sf_food_sim/blob/main/LICENSE">MIT License</a>.</p>
      <p>Uses fast food and supermarkets from <a href="https://www.openstreetmap.org">OpenStreetMap under the ODBL license</a>, filtering only for those with non-empty names to remove potential erroneous data. If the distance between a supermarket / fast food option is less than 0.1 miles, the supermarket is "chosen" by the "house" (ring) regardless of distance tollerance. Distances are straight line (as the crow flies) distance.</p>
      <p><a href="https://github.com/sampottinger/sf_food_sim">Open source code and data available</a> (MIT, ODBL). Simulation uses <a href="http://proj4js.org/">proj4js under the MIT license</a> as well as <a href="https://www.papaparse.com/">PapaParse under the MIT license</a>. <a href="https://stackoverflow.com/help/licensing">Some StackOverflow used under the CC-BY-SA license</a> (<a href="https://stackoverflow.com/questions/2450954">superliminary</a>, <a href="https://stackoverflow.com/questions/14560999">Nathan Lippi</a>). Uses <a href="https://colorbrewer2.org">ColorBrewer</a>.</p>
      <p>Preprocessing in <a href="https://www.python.org/">Python</a> uses <a href="https://jupyter.org/">Jupyter under the BSD license</a> and <a href="https://github.com/shapely/shapely">Shapely under the BSD license</a>.</p>
      <p>By using this page you agree to <a href="https://gleap.org/tos_privacy">terms and conditions / privacy policy</a>.</p>
    </footer>
  </body>

  <script type="text/javascript" src="./jstat.min.js"></script>
  <script type="text/javascript" src="./proj4js.js"></script>
  <script type="text/javascript" src="./papaparse.min.js"></script>
  <script type="text/javascript" src="./geo_util.js"></script>
  <script type="text/javascript" src="./model.js"></script>
  <script type="text/javascript" src="./viz.js"></script>

</html>
