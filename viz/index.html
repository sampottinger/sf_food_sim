<!DOCTYPE html>
<html lang="en">

  <head>
    <title>FoodSim: San Francisco</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./viz.css?v=202301071">
  </head>

  <body>
    <header>
      <div><a id="skip-link" href="#toolSection">Skip to Content</a></div>
      <h1>FoodSim: San Francisco</h1>
      <div class="intro">
        <div id="guide-contents">
          <div class="step" id="step1">
            <div class="advisor">
              <div class="image"><img src="./things/building.png" alt="Picture of a building."></div>
              <div class="message"><p>Hello new recruit! Welcome. Cities impact our health in lots of ways and this includes how they provide access to nutrition.</p><p>Consider <a href="https://www.ers.usda.gov/data-products/food-access-research-atlas/go-to-the-atlas/" target="_blank">food deserts</a> which are <a href="https://www.ers.usda.gov/data-products/food-access-research-atlas/documentation/" target="_blank">low income areas 1 mile or more away from healthy affordable food</a>. These regions are important for public health because, for residents in these areas, it can be challenging to maintain a good diet. Our team is trying to chip away at food deserts using urban planning.</p></div>
            </div>
            <div class="step-controls">
              <a href="#toolSection" id="skipGuideLink">Skip Guide</a> / <a href="#step2" current="step1" class="next first">Start Game >></a>
            </div>
          </div>
          <div class="step later" id="step2">
            <div class="advisor">
              <div class="image"><img src="./people/charlie.png" alt="Picture of Chief Charlie, the leader of the group who is a black man in a suit."></div>
              <div class="message"><p>I'm Chief Charlie, the leader of the team. Your assignment is <a href="https://usabynumbers.com/richest-cities-in-the-us/" target="_blank">one of the wealthiest cities in the US</a>: San Francisco.</p><p>This map shows all of the areas with housing within San Francisco. Your job as a city planner is increase the chances people will choose healthy food. To help you, I've got two advisors along with me: Zoe Zoning and Tamara Transit.</p></div>
            </div>
            <div class="step-controls">
              <a href="#step1" current="step2" class="previous"><< Previous</a> / <a href="#step3" current="step2" class="next">Next >></a>
            </div>
          </div>
          <div class="step later" id="step3">
            <div class="advisor">
              <div class="image"><img src="./people/zoe.png" alt="Picture of Zoe Zoning, advisor with long red dress and long black hair."></div>
              <div class="message"><p>Hey there I'm Zoe Zoning and can help you use one of your most powerful tools: getting subsidies and zoning for new construction. Let me walk you through.</p><p>These filled in dots (<img src="./supermarket.png" alt="Screenshot of a supermarket in the simulation" class="example-img">) represent supermarkets (<a href="#footerDetails">source: OSM, see below</a>). The denser northern part of the city offers many food options but there are some locations in SF with less access, especially in the less dense southern part of the city. For example, the simulation has circled Hunter's Point in the Bayview-Hunter's Point neighborhood which, <a href="https://www.sfpublicpress.org/high-housing-prices-undercut-aid-programs/" target="_blank">in addition to being one of the poorer areas</a>, is far from a supermarket.</p></div>
            </div>
            <div class="step-controls">
              <a href="#step2" current="step3" class="previous"><< Previous</a> / <a href="#step4" current="step3" class="next">Next >></a>
            </div>
          </div>
          <div class="step later" id="step4">
            <div class="advisor">
              <div class="image"><img src="./people/zoe.png" alt="Picture of Zoe Zoning, advisor with long red dress and long black hair."></div>
              <div class="message"><p>Of course, supermarkets aren't the only source of food and these filled in squares (<img src="./fastfood.png" alt="Screenshot of a fast food location in the simulation" class="example-img">) represent fast food locations.</p><p>This tool simulates if different residential areas would choose to go to fast food or the supermarket based on distance to each. Note the southeast of SF. For a lot of residents in this poorer area, fast food may just represent a more convenient option.</p></div>
            </div>
            <div class="step-controls">
              <a href="#step3" current="step4" class="previous"><< Previous</a> / <a href="#step5" current="step4" class="next">Next >></a>
            </div>
          </div>
          <div class="step later" id="step5">
            <div class="advisor">
              <div class="image"><img src="./people/zoe.png" alt="Picture of Zoe Zoning, advisor with long red dress and long black hair."></div>
              <div class="message">In contrast to the Bayview, other areas just to the west are both wealthier and offer more supermarket options. This demonstrates an interesting trend where sometimes income follows access: those with less financial resources to cope with distance to supermarkets are also sometimes those furthest from them.</div>
            </div>
            <div class="step-controls">
              <a href="#step4" current="step5" class="previous"><< Previous</a> / <a href="#step6" current="step5" class="next">Next >></a>
            </div>
          </div>
          <div class="step later" id="step6">
            <div class="advisor">
              <div class="image"><img src="./people/tamara.png" alt="Picture of Tamara Transit, advisor a slim blue dress and longish hair."></div>
              <div class="message"><p>Oh! Sorry to interrupt. I'm Tamara Transit and can help with transit improvements.</p><p>I just want to add that food deserts are often framed in terms of physical distance and income but public transit also plays a role. Consider this area near Lake Merced. While higher income relative to the Bayview, <a href="https://nextcity.org/urbanist-news/maps-public-transportation-access-poverty-equity" target="_blank">it sees poor transportation access</a>, indicating another way the layout of the city might influence eating habits.</p></div>
            </div>
            <div class="step-controls">
              <a href="#step5" current="step6" class="previous"><< Previous</a> / <a href="#step7" current="step6" class="next">Next >></a>
            </div>
          </div>
          <div class="step later" id="step7">
            <div class="advisor">
              <div class="image"><img src="./people/charlie.png" alt="Picture of Chief Charlie, the leader of the group who is a black man in a suit."></div>
              <div class="message"><p>Now that you know what some of the problems are, how might you as a new city planner make it better? I've enabled your controls below.</p><p>Zoe can help you add new supermarkets (or fast food locations) through rezoining and building subsidies. Also, Tamara can help you explore transit subsidies and improvements which might encourage residents to travel further to get to a supermarket relative to the nearest fast food option.</p></div>
            </div>
            <div class="step-controls">
              <a href="#step6" current="step7" class="previous"><< Previous</a> / <a href="#step8" current="step7" class="next">Next >></a>
            </div>
          </div>
          <div class="step later" id="step8">
            <div class="advisor">
              <div class="image"><img src="./people/charlie.png" alt="Picture of Chief Charlie, the leader of the group who is a black man in a suit."></div>
              <div class="message">Your goal is to get 80% to choose the supermarket but be careful: you have a budget.</div>
            </div>
            <div class="step-controls">
              <a href="#step7" current="step8" class="previous"><< Previous</a> / <a href="#step9" current="step8" class="next">Next >></a>
            </div>
          </div>
          <div class="step later" id="step9">
            That's it for the intro. If you want to learn more, you may also consider reviewing maps of <a href="https://www.city-data.com/income/income-San-Francisco-California.html">income in the area</a>, <a href="https://nickconwayblog.wordpress.com/2016/11/13/the-disappearance-of-san-franciscos-middle-class-neighborhoods-1990-2010/">how neighborhood wealth has changed over time</a>, and the <a href="https://www.sfmta.com/sites/default/files/pressreleases/2015/Muni%20Map%202015.pdf">layout of SF's mass transit</a>.
            <div class="step-controls">
              <a href="#step8" current="step9" class="previous"><< Previous</a>
            </div>
          </div>
        </div>
        <div id="skip-guide-msg">Guide skipped!</div>
      </div>
    </header>
    <section id="toolSection">
      <div id="displayArea" class="tool-area">
        <div class="subcontrol late" id="goalPanel">
          <div class="advisor">
            <div class="image"><img id="goalImage"></div>
            <div class="message">
              <div class="main-label">Progress: </div>
              <span id="statusEmoji">Keep going!</span> You have spent <span id="percentSpent">0%</span> of your budget (<span id="constructionPercent">0%</span> on rezoining and construction subsidy, <span id="transitPercent">0%</span> on transit improvement and subsidy). Goal: 80% choose supermarket. You can also <a href="#vizCavnas" id="resetLink">reset your design and try again</a>.
            </div>
          </div>
        </div>
        <canvas id="vizCanvas" width="625" height="540"></canvas>
      </div>
      <div id="controlArea" class="tool-area">
        <div id="controlAreaInner">
          <div class="subcontrol late" id="summaryPanel">
            <div class="main-label">Summary of results:</div>
            <div class="summary-display" id="supermarketSummary">
              <div class="numeric-display"><span id="supermarketNumericDisplay"></span> (<img class="example-img" alt="Example of what a residential area choosing supermarket looks like in the simulation" src="./home_supermarket.png">)</div>
              <div class="bar-display" id="supermarketBarDisplay"></div>
            </div>
            <div class="summary-display" id="fastFoodSummary">
              <div class="numeric-display"><span id="fastFoodNumericDisplay"></span> (<img class="example-img" alt="Example of what a residential area choosing fast food looks like in the simulation" src="./home_fastfood.png">)</div>
              <div class="bar-display" id="fastFoodBarDisplay"></div>
            </div>
            <div class="summary-display" id="unknownSummary">
              <div class="numeric-display"><span id="unknownNumericDisplay"></span> (<img class="example-img" alt="Example of what a residential area far from food source looks like in the simulation" src="./home_desert.png">)</div>
              <div class="bar-display" id="unknownBarDisplay"></div>
            </div>
            <div class="summary-display" id="axisDisplay">
              <div id="startDisplay">0%</div>
              <div id="endDisplay">100%</div>
            </div>
          </div>
          <div class="subcontrol late" id="constructPanel">
            <div class="main-label">Building subsidy / rezoning: </div>
            <div>
              Left click (or tap) to construct / remove building.
              <div id="buildingSubPanel">
                <div><label for="supermarketRadio"><input type="radio" name="buildingType" id="supermarketRadio" checked> Supermarket (<img class="example-img" alt="Example of what a supermarket looks like in the simulation" src="./supermarket.png">)</label></div>
                <div><label for="fastFoodRadio"><input type="radio" name="buildingType" id="fastFoodRadio"> Fast food (<img class="example-img" alt="Example of what fast food looks like in the simulation" src="./fastfood.png">)</label></div>
                <div><label for="delSupermarketRadio"><input type="radio" name="buildingType" id="delSupermarketRadio"> Remove supermarket</label></div>
                <div><label for="delFastFoodRadio"><input type="radio" name="buildingType" id="delFastFoodRadio"> Remove fast food</label></div>
              </div>
            </div>
          </div>
          <div class="subcontrol late" id="distancePanel">
            <div><label for="allowedDistance" class="main-label">Transit subsidy / improvement: <span id="allowedDistanceDisplay"></span></label></div>
            <div><input class="slider" type="range" min="1" max="2" value="1.0" step="0.05" id="allowedDistance" aria-describedby="allowedDistanceInstructions"></div>
            <div id="allowedDistanceInstructions" class="sub-label">Invest in transit to change how much further is someone willing to travel to get to a supermarket relative to the nearest fast food.</div>
          </div>
        </div>
      </div>
    </section>
    <footer id="footerDetails">
      <p>
        <p id="musicLabel">Music:</p>
        <audio id="bgMusic" controls="controls" loop>
          <source src="./music/background.mp3" type="audio/mpeg">
        </audio>
      </p>
      <p>Want more cool ideas and tools at the intersection of data science, data visualization, and game design? <a href="https://tinyletter.com/SamPottinger">Sign up for my low volume mailing list</a>!</p>
      <p>Made by <a href="https://gleap.org">Sam Pottinger</a> (data last updated Jan 2023). By using this you agree to the <a href="https://github.com/sampottinger/sf_food_sim/blob/main/LICENSE">MIT License</a>. Built in part for the <a href="https://www.coursera.org/specializations/game-design">California Institute for the Arts Game Design Sequence</a> final course. <a href="./things/gdd.pdf">See capstone GDD</a>.</p>
      <p>Uses fast food and supermarkets from <a href="https://www.openstreetmap.org">OpenStreetMap under the ODBL license</a>, filtering only for those with non-empty names to remove potential erroneous data. If the distance between a supermarket / fast food option is less than 0.1 miles, the supermarket is "chosen" by the "house" (ring) regardless of distance tollerance. Distances are straight line (as the crow flies) distance. Transit subsidy is how much further someone would be willing to go to a supermarket relative to nearest fast food option.</p>
      <p><a href="https://github.com/sampottinger/sf_food_sim">Open source code and data available</a> (MIT, ODBL). Simulation uses <a href="http://proj4js.org/">proj4js under the MIT license</a> as well as <a href="https://www.papaparse.com/">PapaParse under the MIT license</a>. <a href="https://stackoverflow.com/help/licensing">Some StackOverflow used under the CC-BY-SA license</a> (<a href="https://stackoverflow.com/questions/2450954">superliminary</a>, <a href="https://stackoverflow.com/questions/14560999">Nathan Lippi</a>). Uses <a href="https://colorbrewer2.org">ColorBrewer</a>.</p>
      <p>Preprocessing in <a href="https://www.python.org/">Python</a> uses <a href="https://jupyter.org/">Jupyter under the BSD license</a> and <a href="https://github.com/shapely/shapely">Shapely under the BSD license</a>.</p>
      <p>By using this page you agree to <a href="https://gleap.org/tos_privacy">terms and conditions / privacy policy</a>.</p>
      <p>Only intends to include SF. Of course, supermarkets exist to the south of the city. However, note that SF MUNI, the city transit system, <a href="https://www.sfmta.com/sites/default/files/pressreleases/2015/Muni%20Map%202015.pdf">does not necessarily extend directly into those areas</a> such that transfer between systems would be needed.</p>
      <p>Avatar graphics <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a> from <a href="https://v-ktor.itch.io/pixel-art-portrait-generator">V-ktor</a>. Limited other graphics used with license from <a href="https://www.dreamstime.com/pixel-art-set-modern-various-buildings-vector-colorful-image171325863">Owncham</a> and <a href="https://www.dreamstime.com/pixel-art-style-icons-collection-white-background-image192127406">Greyjj</a>. Music under <a href="https://creativecommons.org/licenses/by-nc/3.0/">CC-BY-NC 3.0</a> from <a href="http://ccmixter.org/files/texasradiofish/64682">texasradiofish and billraydrums</a>.</p>
    </footer>
  </body>

  <script type="text/javascript" src="./proj4js.js?v=20230107"></script>
  <script type="text/javascript" src="./papaparse.min.js?v=20230107"></script>
  <script type="text/javascript" src="./geo_util.js?v=20230107"></script>
  <script type="text/javascript" src="./model.js?v=20230107"></script>
  <script type="text/javascript" src="./viz.js?v=202301071"></script>

</html>
